.. _boat_setup:

Boat Setup
==========

Set the boat down in a flat spot so that the propellers are free to rotate.
Make sure that there are not any cables touching the propellers!

You will work from the right (starboard) side of the boat.

If the white housing does not have a hinge installed, try to set the boat up against a wall so the lid can lean against it while you work inside the housing.
If you do not have something to lean the lid against, you should have a helper hold the lid open for you.

.. _startupsequence:

Startup sequence
----------------

#. Turn on the phone and tablet
#. :ref:`openthewhitehousing`
#. :ref:`pluginthebattery`
#. :ref:`turnontheeboard`
#. Connect the phone and tablet to the WiFi generated by the boat
#. Open the phone app
#. :ref:`phoneoptions`
#. :ref:`phonestart`
#. :ref:`rememberip`
#. :ref:`calibratecompass`
#. :ref:`pluginthephone`
#. :ref:`presssensorsbutton`
#. :ref:`attachphonetovelcro`
#. :ref:`blueboxswitch`
#. :ref:`verifymissingbluebox`
#. Open the tablet app
#. :ref:`connecttablettophone`
#. :ref:`verifytabletdata`
#. :ref:`closewhitehousing`
#. :ref:`rcpropdirections`
#. :ref:`checkbackplate`
#. If you are using an airboat, :ref:`tighten_airfan_bolts`
#. :ref:`launch`

.. _openthewhitehousing:

Open the white housing 
^^^^^^^^^^^^^^^^^^^^^^

Remove all 8 black locks around the rim of the white housing.
Use your thumb to push.

.. raw:: html

	<video width="640" height="480" controls muted> 
		<source src="_static/videos/sliding_lock_remove.mp4" type="video/mp4"/>
		Your browser does not support the video tag.
	</video>

:ref:`Back to the sequence <startupsequence>`

.. _pluginthebattery:

Plug in the LiPo battery
^^^^^^^^^^^^^^^^^^^^^^^^

Lay the battery down between the plastic shields in the middle of the compartment.
It should fit snugly. Lightly push it down until it is flat.
Finally, connect the yellow xt90 connectors.

.. raw:: html

	<video width="640" height="480" controls muted> 
		<source src="_static/videos/insert_battery.mp4" type="video/mp4"/>
		Your browser does not support the video tag.
	</video>

:ref:`Back to the sequence <startupsequence>`

.. _turnontheeboard:

Turn on the e-board
^^^^^^^^^^^^^^^^^^^

Press the small white button on the eboard - the circuit board installed in the lid of the white housing.

.. raw:: html

   <video width="640" height="480" controls muted> 
     <source src="_static/videos/eboard_button_closeup.mp4" type="video/mp4"/>
     Your browser does not support the video tag.
   </video>

:ref:`Back to the sequence <startupsequence>`

.. _phoneoptions:

Phone app: Set vehicle and sensor options
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

Swipe left to right to view the vehicle and sensor options.
Scroll down to the "Vehicle Configuration" section. 
Make sure that the following options are set:

#. Press "Vehicle Type". If you have a propeller boat, select "Differential (Dual Thrust)".
#. Press "Sensor Type 1". If you have a sampler, select "Sampler". Otherwise, select "None".
#. Press "Sensor Type 2". Select "BlueBox".
#. Press "Sensor Type 3". Select "RC (SBUS)".
#. Make sure that the "Is a BlueBox installed?" checkbox is checked.
#. Make sure that the "Use Decawave instead of GPS?" checkbox is *NOT* checked.

Swipe right to left to return to the main view.

The app should retain these settings the next time, so if you reuse the same phone with the same boat, you do not have to do this step.

.. ## TODO: need to make a video of sensor options!

:ref:`Back to the sequence <startupsequence>`

.. _phonestart:

Phone app: Start the app
^^^^^^^^^^^^^^^^^^^^^^^^

Press the red circle and drag it to the right to start the app.
The circle should turn yellow immediately, and then after about 1 second it should turn green.
The phone should display notifications every few seconds, warning you that it expects to receive data from a BlueBox, but has not received it yet.
Once the phone is plugged into the rest of the system and the BlueBox, these warnings should stop.

.. raw:: html

   <video width="640" height="480" controls muted> 
     <source src="_static/videos/phone_app_start.mp4" type="video/mp4"/>
     Your browser does not support the video tag.
   </video>

:ref:`Back to the sequence <startupsequence>`

.. _rememberip:

Phone app: Observe IP address
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

The IP address it displayed at the top of the app. Remember it. You will need it for the tablet control application.

:ref:`Back to the sequence <startupsequence>`

.. _calibratecompass:

Phone app: Calibrate compass
^^^^^^^^^^^^^^^^^^^^^^^^^^^^

Move the phone through the air in front of you in a large figure-8 path.
This forces the phone to recalibrate its compass.
Without this, the boat will not be able to correctly measure its heading.

.. raw:: html

   <video width="640" height="480" controls muted> 
     <source src="_static/videos/compass_calibrate.mp4" type="video/mp4"/>
     Your browser does not support the video tag.
   </video>

:ref:`Back to the sequence <startupsequence>`

.. _pluginthephone:

Plug in the phone
^^^^^^^^^^^^^^^^^

Using the USB cable attached to the eboard's arduino, plug in the phone.
The electronic speed controllers (ESCs) in the boat's rear compartment should beep a pair of low-high sounds.

.. raw:: html

   <video width="640" height="480" controls muted> 
     <source src="_static/videos/plug_in_phone.mp4" type="video/mp4"/>
     Your browser does not support the video tag.
   </video>

:ref:`Back to the sequence <startupsequence>`

.. _presssensorsbutton:

Phone app: Press (and hold for ~ 1 second) the set sensor types button
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

Now that the phone is connected to the eboard's arduino, press and hold the button at the bottom of the app.
This sends a signal from the phone to the arduino to expect the BlueBox and RC receiver.

.. raw:: html

   <video width="640" height="480" controls muted> 
     <source src="_static/videos/phone_app_sensor_type_button.mp4" type="video/mp4"/>
     Your browser does not support the video tag.
   </video>

:ref:`Back to the sequence <startupsequence>`

.. _attachphonetovelcro:

Place the phone on the port wall of the white housing
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

The USB slot on the phone should be toward the rear (aft) of the boat.
Try not to press the side of the phone down too hard - we do not want to hold down the power button accidentally.

.. raw:: html

   <video width="640" height="480" controls muted> 
     <source src="_static/videos/mount_phone.mp4" type="video/mp4"/>
     Your browser does not support the video tag.
   </video>

:ref:`Back to the sequence <startupsequence>`

.. _blueboxswitch:

Turn on the BlueBox
^^^^^^^^^^^^^^^^^^^

Flip the large red switch in the forward right(starboard bow) corner of the white housing.

.. raw:: html

   <video width="640" height="480" controls muted> 
     <source src="_static/videos/bb_switch_on.mp4" type="video/mp4"/>
     Your browser does not support the video tag.
   </video>

:ref:`Back to the sequence <startupsequence>`

.. _verifymissingbluebox:

Verify that the phone stops warning about missing BlueBox data
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

The phone will issue warnings about not receiving BlueBox data until it receives at least one datum.

The last warning notification will remain until you swipe it away like any other Android notification.
If there is still an issue, the phone will issue another notification.
If there are no further warning notifications, then the phone is properly receiving BlueBox data.

If you are having trouble with warnings appearing despite following the startup sequence,
look in the :ref:`troubleshooting section for further details. <phone_still_warns_no_bluebox>`

:ref:`Back to the sequence <startupsequence>`

.. _connecttablettophone:

Tablet app: Connect the tablet to the phone with the IP address
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

In the upper left corner of the app, press the "Connect to a boat" button.
Enter the IP address that appeared at the top of the phone app. 
You do *NOT* need to include the port number.
For example, if the phone app shows "192.168.1.100:14111", you would use "192.168.1.100" with the tablet app.

:ref:`Back to the sequence <startupsequence>`

.. _verifytabletdata:

Tablet app: Verify that sensor data appears
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

Once the tablet is connected to the phone and the phone is receiving BlueBox data,
the data generated by the BlueBox should appear at the bottom of the tablet app's map.


:ref:`Back to the sequence <startupsequence>`

.. _closewhitehousing:

Close the white housing
^^^^^^^^^^^^^^^^^^^^^^^

Align the lid with the bottom before trying to slide a lock back into place.
The lid and bottom need to be compressed together before sliding on a lock.
To create the compression, you might be tempted to put your weight down on the lid, but you should not do that.
Instead, you should pinch together the brackets that stick out from the lid and bottom (locks slide onto these) as you start to slide a lock on to maximize the compression.

Remember: if you are having trouble, do not just push harder.
You should not need a lot of strength. 
Make sure the brackets are aligned and pinched together, and the black locks should slide on easily.

.. raw:: html

   <video width="640" height="480" controls muted> 
     <source src="_static/videos/sliding_lock_attach.mp4" type="video/mp4"/>
     Your browser does not support the video tag.
   </video>


:ref:`Back to the sequence <startupsequence>`

.. _rcpropdirections:

Use RC controller to verify correct left/right turning direction
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

Make sure RC controller is using the model bound to the receiver in the boat.
[link to troubleshooting for RC not working]

:ref:`Back to the sequence <startupsequence>`

.. _checkbackplate:

Verify that the rear compartment is closed
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

If the rear compartmet is open, slide the plate into place.
Push down on the plate near each rotating tab as you rotate the tab over the plate.

:ref:`Back to the sequence <startupsequence>`

.. _tighten_airfan_bolts:

Tighten airfan assembly bolts
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

If you are using an airboat, make sure that the bolts at the bottom of the fan assembly are tight.
Fan vibration causes them to loosen frequently, and they should be checked before each deployment.

.. _launch:

Launch the boat
^^^^^^^^^^^^^^^

Keep the boat mostly upright as you lower it into the water.
Turn the boat so that the nose points out into the water.
Push the boat away from the shore to avoid hitting the shore with the propellers.

:ref:`Back to the sequence <startupsequence>`

:ref:`Back to the index <index>`
